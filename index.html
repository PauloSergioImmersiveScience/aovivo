<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>C칙mera Fullscreen com Troca</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- V칤deo em fullscreen -->
    <video id="camera" autoplay playsinline muted></video>

    <!-- Etiqueta mostrando qual c칙mera est치 ativa -->
    <div id="cameraLabel">游닝 C칙mera: Frontal</div>

    <!-- Bot칚o para trocar a c칙mera -->
    <div class="controls">
        <button id="toggleCamera">游댃 Trocar c칙mera</button>
    </div>

    <script>
        let currentFacingMode = "user";  // padr칚o: frontal
        let currentStream = null;

        const label = document.getElementById("cameraLabel");

        async function startCamera(facingMode = "user") {
            const video = document.getElementById('camera');

            // Para o stream atual antes de iniciar o novo
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
                currentStream = null;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: facingMode },
                    audio: false
                });

                currentStream = stream;
                video.srcObject = stream;
                currentFacingMode = facingMode;

                // Atualizar o texto da c칙mera ativa
                label.textContent =
                    facingMode === "user"
                    ? "游닝 C칙mera: Frontal"
                    : "游닝 C칙mera: Traseira";

            } catch (err) {
                console.error("Erro ao acessar a c칙mera:", err);
                alert("N칚o foi poss칤vel acessar a c칙mera: " + err.message);
            }
        }

        function toggleCamera() {
            const newMode = currentFacingMode === "user" ? "environment" : "user";
            startCamera(newMode);
        }

        document.getElementById('toggleCamera').addEventListener('click', toggleCamera);

        // Inicia com a c칙mera FRONTAL
        startCamera("user");
    </script>

</body>
</html>
